<html>
  <head>
    
  </head>
  <body>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>

  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>

    <canvas width="500" height="500" style="border:solid 1px #000;" id="canvas"></canvas>
    <script>
    $(document).ready(function(){    

       

    function Game(canvas, context, socket) {
      this.socket = socket;
      this.canvas = canvas;
      this.context = context;
      this.width = canvas.width();
      this.height = canvas.height();
      this.pacmen = {};
    }

    Game.prototype.startGame = function() {
      this.listenForKey();
      this.socket.emit('start');
    }

    Game.prototype.listenForKey = function() {
      $(document).keydown(function(event){
        var key = event.which;
        keyInput(key);
      });

      function keyInput(key) {
        socket.emit('keypress', key);
      };
    }

    Game.prototype.listenForUpdate = function() {
      _this = this;
      socket.on('update', function(pacman, sprite, direction) {     
        _this.renderPacmen;  
        _thi.paintPacman(pacman);
        paintSprite(sprite.x, sprite.y, sprite.size);
        paintScore(scoreText);   
      });

      socket.on('game:over', function() {      
        startGame();
      });
    };

    Game.prototype.renderPacmen = function () {
      render(pacman, sprite, direction);
        
        

        function paintSprite(x, y, size) {
          context.fillStyle = "blue";
          context.fillRect(x*size, y*size, size, size);
          context.strokeStyle = "white";
          context.strokeRect(x*size, y*size, size, size);
        }

        function paintScore(scoreText) {
          context.font="20px Georgia";
          context.fillText(scoreText, 5, height - 5);
        }
        

      });

      var canvas = $("#canvas")[0];
      var context = canvas.getContext("2d");
      var socket = io();
      var game = new Game(canvas, context, socket);
      game.startGame()


  
  
    </script>
  </body>
</html>